<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>extensions/file_system/definitions.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html">Cli</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#getCwd">getCwd</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#getExitCode">getExitCode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#getOutput">getOutput</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#run">run</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#setCwd">setCwd</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#setEnvironmentVariable">setEnvironmentVariable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli-Cli.html#setEnvironmentVariables">setEnvironmentVariables</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html">FixturesLoader</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#configure">configure</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#load">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#loadJson">loadJson</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#loadModule">loadModule</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#loadText">loadText</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#loadYaml">loadYaml</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader-FixturesLoader.html#setFeatureUri">setFeatureUri</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html">HttpApiClient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#clearBody">clearBody</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#clearHeaders">clearHeaders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#clearRequestCookies">clearRequestCookies</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#disableCookies">disableCookies</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#enableCookies">enableCookies</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#getCookie">getCookie</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#getCookies">getCookies</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#getResponse">getResponse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#makeRequest">makeRequest</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#setCookie">setCookie</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#setFormBody">setFormBody</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#setHeader">setHeader</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#setHeaders">setHeaders</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#setJsonBody">setJsonBody</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi_client-HttpApiClient.html#setQuery">setQuery</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-extensions_snapshot_Snapshot-Snapshot.html">Snapshot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_Snapshot-Snapshot.html#expectToMatch">expectToMatch</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-extensions_state_State-State.html">State</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_state_State-State.html#clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_state_State-State.html#dump">dump</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_state_State-State.html#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_state_State-State.html#set">set</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-Cast.html">Cast</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Cast.html#.addType">addType</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Cast.html#.array">array</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Cast.html#.object">object</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Cast.html#.objects">objects</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Cast.html#.value">value</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-Cast.html#~CastFunction">CastFunction</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_Cli.html">extensions/Cli</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli.html#.extendWorld">extendWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_Cli.html#.install">install</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_Cli_Cli.html">extensions/Cli/Cli</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_FileSystem.html">extensions/FileSystem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_FileSystem.html#.extendWorld">extendWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_FileSystem.html#.install">install</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_FileSystem_FileSystem.html">extensions/FileSystem/FileSystem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_FileSystem_FileSystem.html#.createDirectory">createDirectory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_FileSystem_FileSystem.html#.getFileContent">getFileContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_FileSystem_FileSystem.html#.getFileInfo">getFileInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_FileSystem_FileSystem.html#.remove">remove</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_fixtures.html">extensions/fixtures</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures.html#.extendWorld">extendWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_fixtures.html#.install">install</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_fixtures_FixturesLoader.html">extensions/fixtures/FixturesLoader</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_fixtures_hooks.html">extensions/fixtures/hooks</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_httpApi.html">extensions/httpApi</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi.html#.extendWorld">extendWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_httpApi.html#.install">install</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_httpApi_client.html">extensions/httpApi/client</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_snapshot.html">extensions/snapshot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot.html#.extendWorld">extendWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot.html#.install">install</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_snapshot_cleanup.html">extensions/snapshot/cleanup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_cleanup.html#.cleanSnapshots">cleanSnapshots</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_cleanup.html#.referenceSnapshot">referenceSnapshot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_cleanup.html#.resetReferences">resetReferences</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_snapshot_FileSystem.html">extensions/snapshot/FileSystem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_FileSystem.html#.createDirectory">createDirectory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_FileSystem.html#.getFileContent">getFileContent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_FileSystem.html#.getFileInfo">getFileInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_FileSystem.html#.remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_FileSystem.html#.writeFileContent">writeFileContent</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html">extensions/snapshot/snapshot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.diff">diff</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.extractScenarios">extractScenarios</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.formatSnapshotFile">formatSnapshotFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.normalizeNewlines">normalizeNewlines</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.parseSnapshotFile">parseSnapshotFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.prefixSnapshots">prefixSnapshots</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.printBacktickString">printBacktickString</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.readSnapshotFile">readSnapshotFile</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.snapshotsPath">snapshotsPath</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_snapshot_snapshot_.html#.writeSnapshotFile">writeSnapshotFile</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_snapshot_Snapshot.html">extensions/snapshot/Snapshot</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_state.html">extensions/state</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_state.html#.extendWorld">extendWorld</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-extensions_state.html#.install">install</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-extensions_state_State.html">extensions/state/State</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#countNestedProperties">countNestedProperties</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#hasExtension">hasExtension</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#mustGetResponse">mustGetResponse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#registerExtension">registerExtension</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">extensions/file_system/definitions.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'

const { expect } = require('chai')

module.exports = ({ Given, Then, registerHandler }) => {
    /**
     * Creating a directory.
     */
    Given(/^(?:I )?create directory (.+)$/, function(directory) {
        return this.fileSystem.createDirectory(this.cli.getCwd(), directory)
    })

    /**
     * Remove a file or directory.
     */
    Given(/^(?:I )?remove (?:file|directory) (.+)$/, function(fileOrDirectory) {
        return this.fileSystem.remove(this.cli.getCwd(), fileOrDirectory)
    })

    /**
     * Checking file/directory presence.
     */
    Then(/^(file|directory) (.+) should (not )?exist$/, function(type, file, flag) {
        return this.fileSystem.getFileInfo(this.cli.getCwd(), file).then(info => {
            if (flag === 'not ') {
                expect(info, `${type} '${file}' exists`).to.be.null
            } else {
                expect(info, `${type} '${file}' does not exist`).not.to.be.null
                if (type === 'file') {
                    expect(info.isFile(), `'${file}' is not a file`).to.be.true
                } else {
                    expect(info.isDirectory(), `'${file}' is not a directory`).to.be.true
                }
            }
        })
    })

    /**
     * Checking file content.
     */
    let checkingFileContentRegex = /^file (.+) content should (not )?(equal|contain|match) (?!snapshot)(.+)$/
    if (registerHandler)
        checkingFileContentRegex = /^file (.+) content should (not )?(equal|contain|match) (?!snapshot)(.+)(){0}$/
    Then(checkingFileContentRegex, function(file, flag, comparator, expectedValue, unused) {
        return this.fileSystem
            .getFileContent(this.cli.getCwd(), file)
            .then(content => {
                let expectFn = expect(
                    content,
                    `Expected file '${file}' to ${flag
                        ? flag
                        : ''}${comparator} '${expectedValue}', but found '${content}' which does${flag
                        ? ''
                        : ' not'}`
                ).to
                if (flag !== undefined) {
                    expectFn = expectFn.not
                }
                expectFn[comparator](
                    comparator === 'match' ? new RegExp(expectedValue) : expectedValue
                )
            })
            .catch(err => {
                if (err.code === 'ENOENT') return expect.fail('', '', `File '${file}' should exist`)

                return Promise.reject(err)
            })
    })
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Sep 30 2017 14:11:33 GMT+0200 (CEST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
